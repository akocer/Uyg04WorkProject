@{
    ViewData["Title"] = "Index";
}

<h1 class="h3 mb-4 text-gray-800">İş Kayıtları</h1>

<table class="table" id="tbWorkList">
    <thead>
        <tr>
            <th>SN</th>
            <th>Başlık</th>
            <th>Skor</th>
            <th>İşlemler</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>Test</td>
            <td>24</td>
            <td>
                <a href="#" class="btn btn-primary btn-circle" title="Taşı">
                    <i class="fas fa-arrows"></i>
                </a>
                <a href="#" class="btn btn-primary btn-circle" title="Detay">
                    <i class="fas fa-search"></i>
                </a>
                <a href="#" class="btn btn-primary btn-circle" title="Düzenle">
                    <i class="fas fa-pencil"></i>
                </a>
                <a href="#" class="btn btn-danger btn-circle" title="Sil">
                    <i class="fas fa-trash"></i>
                </a>
            </td>
        </tr>
    </tbody>
</table>

@section Scripts{
    <script>
        $(document).ready(function () {
            var ApiBaseUrl = "@ViewBag.ApiBaseUrl";
            GetWorkList();

            function GetWorkList() {
                $.ajax({
                    url: ApiBaseUrl + "Work",
                    method: "GET",
                    contentType: "application/json",
                    success: function (data) {
                        WorkDataToTable(data);
                    },
                    error: function () { }
                });
            }

            function WorkDataToTable(data) {
                console.log(data);
                var tr = "";
                $.each(data, function (i, item) {
                    tr += `<tr>
                                                                                                                                                                                                                            <td>${(i + 1)}</td>
                                                                                                                                                                                                                            <td>${item.title}</td>
                                                                                                                                                                                                                            <td>${item.score}</td>
                                                                                                                                                                                                                    <td>
                                                                                                                                    <a href="#" class="btn btn-primary btn-circle" title="Taşı">
                                                                                                                            <i class="fas fa-arrows"></i>
                                                                                                                                </a>                                                                                             <a href="/Home/WorkSteps/${item.id}" class="btn btn-primary btn-circle" title="Detay">
                                                                                                                                                                                                                            <i class="fas fa-search"></i>
                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                        <a href="#" class="btn btn-primary btn-circle" title="Düzenle">
                                                                                                                                                                                                                            <i class="fas fa-pencil"></i>
                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                        <a href="#" class="btn btn-danger btn-circle" title="Sil">
                                                                                                                                                                                                                            <i class="fas fa-trash"></i>
                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                    </td>
                                                                                                                                                                                                                </tr>`;
                });
                $("#tbWorkList tbody").empty();
                $("#tbWorkList tbody").append(tr);
            }

        });
    </script>
}